<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Biomedical Waste Sorting Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4DQYGRYMM7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4DQYGRYMM7');
    </script>

    <!-- QR Code Generator -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

<!-- ============================
     WELCOME SCREEN
=============================== -->
<div id="welcomeScreen" class="welcome-screen">
    <div class="welcome-card">
        <h1 class="welcome-title">üè• Biomedical Waste Sorting Game</h1>
        <p class="welcome-subtitle">Interactive Training for Healthcare Professionals</p>
        
        <div class="welcome-features">
            <div class="feature-item">‚úÖ Learn proper waste segregation</div>
            <div class="feature-item">‚úÖ Color-coded bin system</div>
            <div class="feature-item">‚úÖ Timed challenges</div>
            <div class="feature-item">‚úÖ Personalized certificate</div>
            <div class="feature-item">‚úÖ Real-time feedback</div>
        </div>
        
        <button id="welcomeContinueBtn" class="primary-btn">Get Started ‚Üí</button>
        
        <p class="privacy-note">
            This training game collects anonymous gameplay statistics only.<br>
            No personal data is stored.
        </p>
    </div>
</div>

<!-- ============================
     START SCREEN
=============================== -->
<div id="startScreen" class="start-screen hidden">
    <h1 class="start-title">Biomedical Waste Sorting Game</h1>
    <p class="start-subtitle">Select a difficulty level to begin</p>

    <div class="difficulty-container">
        <div class="difficulty-card" data-level="easy">
            <h3>Easy</h3>
            <p>üü¢ 90 seconds</p>
            <small>For beginners</small>
        </div>
        <div class="difficulty-card" data-level="medium">
            <h3>Medium</h3>
            <p>üü° 60 seconds</p>
            <small>Standard training</small>
        </div>
        <div class="difficulty-card" data-level="hard">
            <h3>Hard</h3>
            <p>üî¥ 30 seconds</p>
            <small>Expert challenge</small>
        </div>
    </div>

    <button id="startGameBtn" class="primary-btn disabled" disabled>
        Continue to Game
    </button>

    <div class="footer-credit">
        Designed & Developed by <strong>Gokul T.B</strong>
    </div>
</div>

<!-- ============================
     PLAYER INFO SCREEN
=============================== -->
<div id="playerInfoScreen" class="player-info-screen hidden">
    <div class="player-info-card">
        <h2>üìù Certificate Details</h2>
        <p class="subtitle">Enter your details for a personalized certificate</p>
        
        <form id="playerInfoForm">
            <div class="form-group">
                <label for="playerName">Your Full Name</label>
                <input 
                    type="text" 
                    id="playerName" 
                    placeholder="e.g. Dr. Sarah Johnson"
                    required
                >
                <small class="helper-text">This will appear on your certificate</small>
            </div>
            
            <div class="form-group">
                <label for="playerOrganization">Organization / Institution</label>
                <input 
                    type="text" 
                    id="playerOrganization" 
                    placeholder="e.g. General Hospital, Medical College"
                >
                <small class="helper-text">Optional, but recommended for training records</small>
            </div>
            
            <div class="button-group">
                <button type="button" id="skipInfoBtn" class="secondary-btn">
                    Skip & Play Anonymously
                </button>
                <button type="submit" id="submitInfoBtn" class="primary-btn">
                    Start Game with Certificate
                </button>
            </div>
            
            <p class="privacy-note">
                <small>‚úÖ Your information is used only for certificate generation and is not stored on our servers.</small>
            </p>
        </form>
    </div>
</div>

<!-- ============================
     MAIN GAME CONTAINER
=============================== -->
<div id="gameContainer" class="container hidden">
    <h1 class="title">Biomedical Waste Sorting Game</h1>
    <p class="subtitle">Click the correct bin for each biomedical waste item.</p>

    <!-- Timer + Progress -->
    <div class="status-bar">
        <div class="timer-box">
            <span class="timer-label">Time Left</span>
            <span id="timerValue" class="timer-value">01:00</span>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div id="progressFill"></div>
            </div>
            <div class="progress-text">Game Time</div>
        </div>
    </div>

    <!-- Item + Score Panels -->
    <div class="cards-container">
        <div class="card item-card">
            <h2>Current Item</h2>
            <img id="itemImage" class="item-image fade-target" alt="Item">
            <p id="itemName" class="item-name fade-target"></p>
        </div>

        <div class="card score-card">
            <h2>Score</h2>
            <p id="score" class="score-value">0</p>
            <div id="gameStats" class="game-stats">
                Correct: 0 | Wrong: 0 | Accuracy: 0%
            </div>
        </div>
    </div>

    <!-- Feedback -->
    <div id="feedback" class="feedback fade-target"></div>

    <!-- Bin Buttons -->
    <div class="bin-container">
        <button class="bin-btn" data-bin="Yellow">
            <img src="images/yellowbin.jpg" class="bin-icon">
            <div>Yellow</div>
        </button>

        <button class="bin-btn" data-bin="Red">
            <img src="images/redbin.jpg" class="bin-icon">
            <div>Red</div>
        </button>

        <button class="bin-btn" data-bin="White">
            <img src="images/translucentbin.png" class="bin-icon">
            <div>White</div>
        </button>

        <button class="bin-btn" data-bin="Blue">
            <img src="images/bluebin.png" class="bin-icon">
            <div>Blue</div>
        </button>

        <button class="bin-btn" data-bin="Green">
            <img src="images/greenbin.png" class="bin-icon">
            <div>Green</div>
        </button>
    </div>

    <!-- Instructions Collapse -->
    <button id="toggleInstructions" class="secondary-btn">‚ñº Show Instructions</button>

    <div id="instructionsPanel" class="instructions hidden fade">
        <h3>How to Play & Bin Guide</h3>
        
        <div class="instructions-grid">
            <div class="instruction-step">
                <div class="step-number">1</div>
                <p>Click the correct bin for each waste item</p>
            </div>
            <div class="instruction-step">
                <div class="step-number">2</div>
                <p>Watch your time - you have <span id="timeLimitDisplay">60</span> seconds</p>
            </div>
            <div class="instruction-step">
                <div class="step-number">3</div>
                <p>Aim for high accuracy to earn a certificate</p>
            </div>
        </div>
        
        <h4>Bin Color Guide</h4>
        <div class="bin-guide">
            <div class="bin-guide-item yellow">
                <div class="bin-color-sample"></div>
                <div class="bin-guide-content">
                    <strong>Yellow Bin</strong>
                    <p>Infectious waste, anatomical waste, expired medicines</p>
                    <small>Example: Blood bags, amputated body parts</small>
                </div>
            </div>
            <div class="bin-guide-item red">
                <div class="bin-color-sample"></div>
                <div class="bin-guide-content">
                    <strong>Red Bin</strong>
                    <p>Contaminated plastics & tubing</p>
                    <small>Example: IV tubes, syringes without needles</small>
                </div>
            </div>
            <div class="bin-guide-item white">
                <div class="bin-color-sample"></div>
                <div class="bin-guide-content">
                    <strong>White Bin</strong>
                    <p>Sharps and needles</p>
                    <small>Example: Needles, scalpels, blades</small>
                </div>
            </div>
            <div class="bin-guide-item blue">
                <div class="bin-color-sample"></div>
                <div class="bin-guide-content">
                    <strong>Blue Bin</strong>
                    <p>Glassware and metallic implants</p>
                    <small>Example: Ampoules, vials, slides</small>
                </div>
            </div>
            <div class="bin-guide-item green">
                <div class="bin-color-sample"></div>
                <div class="bin-guide-content">
                    <strong>Green Bin</strong>
                    <p>General non-hazardous waste</p>
                    <small>Example: Paper, food waste, wrappers</small>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-credit">
        Designed & Developed by <strong>Gokul T.B</strong>
    </div>
</div>

<!-- ============================
     GAME OVER MODAL
=============================== -->
<div id="gameOverModal" class="modal hidden">
    <div class="modal-content">
        <div style="text-align:center; margin-bottom: 20px;">
            <div id="trophyIcon" style="font-size: 60px; display: none;">üèÜ</div>
        </div>
        
        <h2>üéØ Training Complete!</h2>
        
        <!-- Performance Summary -->
        <div class="performance-summary">
            <div class="stat-box">
                <div class="stat-label">Final Score</div>
                <div id="finalScore" class="stat-value">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Accuracy</div>
                <div id="finalAccuracy" class="stat-value">0%</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Difficulty</div>
                <div id="finalDifficulty" class="stat-value">Medium</div>
            </div>
        </div>
        
        <!-- Performance Message -->
        <p id="performanceMessage" style="text-align:center; font-style: italic; color: #4a5568; margin: 20px 0;">
            Great effort! Ready for your certificate?
        </p>
        
        <!-- Action Buttons -->
        <div class="action-buttons">
            <button id="downloadCertBtn" class="primary-btn">
                üìÑ Download Certificate
            </button>
            
            <div class="share-buttons">
                <button id="shareWhatsAppBtn" class="share-btn whatsapp">
                    <span>üì± Share on WhatsApp</span>
                </button>
                <button id="shareImageBtn" class="share-btn image">
                    <span>üñºÔ∏è Share as Image</span>
                </button>
            </div>
            
            <button id="playAgainBtn" class="secondary-btn">
                üéÆ Play Again
            </button>
        </div>
        
        <!-- Quick Play Options -->
        <div class="quick-play">
            <p style="margin: 20px 0 10px 0; color: #718096; font-size: 14px;">
                Try a different difficulty:
            </p>
            <div class="difficulty-chips">
                <button class="difficulty-chip" data-level="easy">Easy (90s)</button>
                <button class="difficulty-chip" data-level="medium">Medium (60s)</button>
                <button class="difficulty-chip" data-level="hard">Hard (30s)</button>
            </div>
        </div>
    </div>
</div>

<!-- HIDDEN CERTIFICATE TEMPLATE -->
<div id="certificateContainer" style="display:none; width:900px; background:white; padding:40px;">
    <div style="border: 8px solid #2b6cb0; padding: 40px; border-radius: 12px; font-family: Arial, sans-serif;">
        <h1 style="color:#2b6cb0; text-align:center; margin-bottom: 10px;">Certificate of Completion</h1>
        <h3 style="text-align:center; color:#555; margin-bottom: 30px; font-weight: normal;">
            Biomedical Waste Segregation Training
        </h3>
        
        <div style="text-align:center; margin: 30px 0;">
            <p style="font-size: 18px; margin-bottom: 10px;">This is to certify that</p>
            <h2 id="certName" style="font-size: 32px; margin: 15px 0; color: #333;">
                [Participant Name]
            </h2>
            <h3 id="certOrg" style="font-size: 22px; margin: 10px 0 30px 0; color: #555; font-weight: normal;">
                [Organization/Institution]
            </h3>
            
            <p style="font-size: 18px; max-width: 600px; margin: 30px auto; line-height: 1.6;">
                has successfully completed the Biomedical Waste Sorting Training Game with a score of 
                <span style="font-weight: bold; color: #2b6cb0;" id="certScore">0</span> points and 
                <span style="font-weight: bold; color: #2b6cb0;" id="certAccuracy">0</span>% accuracy on 
                <span id="certDifficulty">Medium</span> difficulty.
            </p>
        </div>
        
        <div style="background: #f7fafc; padding: 20px; border-radius: 10px; margin: 30px 0;">
            <h4 style="text-align:center; margin-bottom: 15px; color: #4a5568;">Performance Summary</h4>
            <div style="display: flex; justify-content: space-around; text-align:center;">
                <div>
                    <div style="font-size: 24px; color: #2b6cb0; font-weight: bold;" id="certCorrect">0</div>
                    <div style="font-size: 14px;">Correct Answers</div>
                </div>
                <div>
                    <div style="font-size: 24px; color: #2b6cb0; font-weight: bold;" id="certWrong">0</div>
                    <div style="font-size: 14px;">Wrong Answers</div>
                </div>
                <div>
                    <div style="font-size: 24px; color: #2b6cb0; font-weight: bold;" id="certTotal">0</div>
                    <div style="font-size: 14px;">Total Items</div>
                </div>
            </div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-top: 30px;">
            <div>
                <div style="margin-bottom: 10px;">
                    <div style="font-weight: bold; font-size: 14px;">Certificate ID:</div>
                    <div id="certID" style="font-family: monospace; color: #718096; font-size: 14px;">BW-XXXX-XXXX-XXXX</div>
                </div>
                <div>
                    <div style="font-weight: bold; font-size: 14px;">Date of Issue:</div>
                    <div id="certDate" style="color: #718096; font-size: 14px;">[Date]</div>
                </div>
            </div>
            
            <div id="certQR" style="text-align:center;">
                <!-- QR will be generated here -->
                <div style="font-size: 12px; margin-top: 10px; color: #718096;">
                    Scan to verify
                </div>
            </div>
            
            <div style="text-align: right;">
                <div style="border-top: 2px solid #4a5568; padding-top: 10px; display: inline-block;">
                    <div style="font-weight: bold;">Gokul T.B</div>
                    <div style="font-size: 14px;">Game Developer & Trainer</div>
                    <div style="font-size: 12px; color: #718096;">creator619-python.github.io</div>
                </div>
            </div>
        </div>
        
        <div style="text-align:center; margin-top: 25px; font-size: 12px; color: #a0aec0;">
            This certificate verifies completion of the Biomedical Waste Sorting Training Game.<br>
            Valid for training and awareness purposes only.
        </div>
    </div>
</div>

<!-- PDF libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script src="script.js"></script>
</body>
</html>
